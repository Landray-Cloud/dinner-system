(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{0:function(e,t){},1:function(e,t){},2:function(e,t){},3:function(e,t){},"9d8Q":function(e,t,a){},"9mST":function(e,t,a){},LSlk:function(e,t,a){},MGin:function(e,t){e.exports=ReactRouter},QqCh:function(e,t,a){"use strict";a.r(t);var n=a("lwsE"),r=a.n(n),s=a("W8MJ"),o=a.n(s),i=a("a1gu"),u=a.n(i),c=a("Nsbk"),l=a.n(c),h=a("7W2i"),m=a.n(h),d=a("cDcd"),p=a.n(d),f=a("faye"),g=a.n(f),v=a("PJYZ"),S=a.n(v),k=a("MGin"),y=(a("geJ5"),a("qu0K")),b=a.n(y),E=a("iJl9"),C=a.n(E),w=a("4IMT"),R=a.n(w),x=a("rR1Q"),M=a.n(x),D=a("ZrAS"),N=function(e){return D.sign({data:e},"Leonardo")},O=function(e){return e?D.verify(e,"Leonardo"):""},I={setToken:N,getToken:O,getNameFromLocal:function(e){var t="",a=localStorage.getItem("DiCaprio");if(a){var n=O(a);n&&(n.data?t=n.data:n.userName&&(t=n.userName))}return t},setNameToLocal:function(e){var t=N(e);localStorage.setItem("DiCaprio",t)}},F=b.a.Item,L=function(e){function t(e){var a;return r()(this,t),(a=u()(this,l()(t).call(this,e))).checkEngAndNum=function(e){return!!/^[A-Za-z0-9]*$/.test(e)},a.checkData=function(e){var t=!0;return""!==e&&null!==e||(t=!1),a.checkEngAndNum(e)&&(t=!1),e.length>4&&(t=!1),t||M.a.error({message:"",description:"乖！输入你的真实姓名好不好?"}),t},a.handleSubmit=function(e){var t=a.state.uname;a.checkData(t)&&(I.setNameToLocal(t),k.hashHistory.push("/order"))},a.state={uname:""},a.handleInputChange=a.handleInputChange.bind(S()(S()(a))),a.handleSubmit=a.handleSubmit.bind(S()(S()(a))),a.checkData=a.checkData.bind(S()(S()(a))),a}return m()(t,e),o()(t,[{key:"componentDidMount",value:function(){I.getNameFromLocal()&&k.hashHistory.push("/order")}},{key:"handleInputChange",value:function(e){this.setState({uname:e.target.value})}},{key:"render",value:function(){return p.a.createElement("div",{className:"form-warp"},p.a.createElement("h1",null,"加班点餐系统"),p.a.createElement(b.a,{inline:!0,onSubmit:this.handleSubmit},p.a.createElement(F,{label:"姓名"},p.a.createElement(C.a,{placeholder:"请输入你的名字",value:this.state.uname,onChange:this.handleInputChange})),p.a.createElement(R.a,{type:"primary",htmlType:"submit"},"提交")))}}]),t}(d.Component),T=a("o0o1"),H=a.n(T),J=a("ftlp"),$=a.n(J),A=(a("LSlk"),a("FAat")),Q=a.n(A),q=undefined&&undefined.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(r,s){function o(e){try{u(n.next(e))}catch(t){s(t)}}function i(e){try{u(n["throw"](e))}catch(t){s(t)}}function u(e){e.done?r(e.value):new a(function(t){t(e.value)}).then(o,i)}u((n=n.apply(e,t||[])).next())})},z=Q.a.Option,G=b.a.Item,K=function(e){function t(e){var a;return r()(this,t),(a=u()(this,l()(t).call(this,e))).state={week:"",orderDate:"",restaurant:"",name:"",orderStatusModel:0,submitStatus:"",form:{orderStatus:0,remarks:""}},a.handleOrderStatusChange=a.handleOrderStatusChange.bind(S()(S()(a))),a.handleRestaurantChange=a.handleRestaurantChange.bind(S()(S()(a))),a.handleRemarksChange=a.handleRemarksChange.bind(S()(S()(a))),a.handleSubmit=a.handleSubmit.bind(S()(S()(a))),a}return m()(t,e),o()(t,[{key:"getOrderStatus",value:function(){return q(this,void 0,void 0,H.a.mark(function e(){var t,a,n,r,s;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.getNameFromLocal(),a=this.state.orderDate,n="orderStatus?name=".concat(t,"&orderDate=").concat(a),e.next=5,$.a.get(n);case 5:r=e.sent,(s=r.data.data.orderStatus)&&this.setState({orderStatusModel:s});case 8:case"end":return e.stop()}},e,this)}))}},{key:"getSubmitStatus",value:function(){return q(this,void 0,void 0,H.a.mark(function e(){var t,a,n,r;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.orderDate,a="getSubmit?date=".concat(t),e.next=4,$.a.get(a);case 4:n=e.sent,r=n.data.data.status,this.setState({submitStatus:r});case 7:case"end":return e.stop()}},e,this)}))}},{key:"componentDidMount",value:function(){var e=this,t=I.getNameFromLocal();if(t){var a=new Date,n=a.Format("yyyy-MM-dd"),r=a.Format("yyyy-MM-dd u");this.setState({name:t,orderDate:n,week:r},function(t){e.getSubmitStatus(),e.getOrderStatus()})}else k.hashHistory.push("/")}},{key:"handleOrderStatusChange",value:function(e){var t=Object.assign({},this.state.form,{orderStatus:e});this.setState({form:t})}},{key:"handleRestaurantChange",value:function(e){this.setState({restaurant:e})}},{key:"handleRemarksChange",value:function(e){var t=e.target.value,a=Object.assign({},this.state.form,{remarks:t});this.setState({form:a})}},{key:"checkForm",value:function(){var e=this.state.form;return e.orderStatus?!!e.remarks||(M.a.error({message:"",description:"要在备注里写上加班原因哦"}),!1):(M.a.error({message:"",description:"你到底加不加班?"}),!1)}},{key:"handleSubmit",value:function(e){return q(this,void 0,void 0,H.a.mark(function t(){var e,a,n;return H.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.checkForm()){t.next=2;break}return t.abrupt("return");case 2:return(e=this.state.form).name=this.state.name,(a=this.state.restaurant)&&(e.remarks="[".concat(a,"] ").concat(e.remarks)),n=parseInt(e.orderStatus),e.orderStatus=n,t.next=10,$.a.post("addOrder",e);case 10:t.sent,this.setState({orderStatusModel:n});case 12:case"end":return t.stop()}},t,this)}))}},{key:"generateOpts",value:function(){var e=[],t=["真功夫(快餐)","永和豆浆(快餐)","米多面多","潮梅里卤鹅","马来一号","港岛记"];if("星期四"===this.state.week&&(t=["壹定食(快餐)","吃个汤(椰子汤)","金牌隆江猪脚烧腊(烧腊)","起家一头牛","盒悦","红荔村肠粉"]),t.length>0)for(var a=0;a<t.length;a++){var n=t[a];e.push(p.a.createElement(z,{value:n},n))}return e}},{key:"render",value:function(){var e=this.state.name,t=this.state.week,a=this.generateOpts(),n=p.a.createElement(b.a,{horizontal:!0,onSubmit:this.handleSubmit},p.a.createElement(G,{label:"加班",labelCol:{span:6},wrapperCol:{span:14}},p.a.createElement(Q.a,{placeholder:"请选择",onChange:this.handleOrderStatusChange},p.a.createElement(z,{value:"1"},"加班订餐"),p.a.createElement(z,{value:"2"},"加班不订餐"),p.a.createElement(z,{value:"3"},"不加班不订餐"))),p.a.createElement(G,{label:"吃啥",labelCol:{span:6},wrapperCol:{span:14}},p.a.createElement(Q.a,{placeholder:"请选择",onChange:this.handleRestaurantChange},a)),p.a.createElement(G,{label:"备注",labelCol:{span:6},wrapperCol:{span:14}},p.a.createElement(C.a,{"data-id":"remarks",placeholder:"可以写写因啥事加班?",allowClear:!0,value:this.state.form.remarks,onChange:this.handleRemarksChange})),p.a.createElement(R.a,{type:"primary",htmlType:"submit"},"提交")),r=parseInt(this.state.orderStatusModel);if(r>0){var s="";switch(r){case 1:s="加班订餐";break;case 2:s="加班不订餐";break;case 3:s="不加班不订餐"}n=p.a.createElement("p",{className:"tips-text"},"今天你",p.a.createElement("span",null,s),"，如有变动，请联系","新梅","。")}return 0===this.state.submitStatus&&(n=p.a.createElement("p",{className:"tips-text"},"现在",p.a.createElement("span",null,"不许下单"),"啦，如有疑问，请联系","新梅","。")),p.a.createElement("div",{className:"form-warp"},p.a.createElement("h2",null,"你好呀，",e,"。今天是",t),n)}}]),t}(d.Component),P=(a("9d8Q"),a("9mST"),a("cOoR"),a("o0KG"),a("hira"),function(e){function t(){return r()(this,t),u()(this,l()(t).apply(this,arguments))}return m()(t,e),o()(t,[{key:"render",value:function(){return I.getNameFromLocal()?k.hashHistory.push("/order"):k.hashHistory.push("/"),p.a.createElement(k.Router,{history:k.hashHistory},p.a.createElement(k.Route,{path:"/",component:L}),p.a.createElement(k.Route,{path:"/order",component:K}))}}]),t}(d.Component));g.a.render(p.a.createElement(P,null),document.getElementById("app"))},cDcd:function(e,t){e.exports=React},cOoR:function(e,t,a){},faye:function(e,t){e.exports=ReactDOM},fc6i:function(e,t){e.exports=CreateReactClass},ftlp:function(e,t,a){var n=a("zr5I").create({baseURL:"http://test.ywork.me/node/dinner/"});e.exports=n},geJ5:function(e,t,a){},hira:function(e,t){Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"u+":{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"}[this.getDay()],"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};if(/(y+)/.test(e)){for(var a in e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)),t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e}for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e}},o0KG:function(e,t,a){},rf6O:function(e,t){e.exports=PropTypes},zr5I:function(e,t){e.exports=Axios}},[["QqCh",1,2]]]);